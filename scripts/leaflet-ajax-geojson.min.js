L.AjaxGeoJSON=L.GeoJSON.extend({options:{type:"json"},initialize:function(e,t){L.setOptions(this,t),this._url=e,this.layer=L.geoJson(null,this.options)},onAdd:function(e){var t,n=this,s=this.options.type;this.map=e,e.addLayer(this.layer),this.request||(this.request=t=new XMLHttpRequest,t.onreadystatechange=function(){var e;t.readyState===t.DONE&&200===t.status&&("json"===s?e=JSON.parse(t.responseText):-1!==["kml","gpx"].indexOf(s)&&(e=window.toGeoJSON[s](t.responseXML)),n.json=e,n.layer.addData(e),n.fire("ready"))},t.open("get",this._url,!0),t.send()),this.fire("add")},eachLayer:function(e){this.layer.eachLayer(e)},setStyle:function(e){this.layer.setStyle(e)},resetStyle:function(e){this.layer.resetStyle(e)},onRemove:function(e){this.map.removeLayer(this.layer)},getBounds:function(){return this.layer.getBounds()}}),L.ajaxGeoJson=function(e,t){return new L.AjaxGeoJSON(e,t)};
